<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>class Runner - RDoc Documentation</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "./";
  var index_rel_prefix = "./";
</script>

<script src="./js/navigation.js" defer></script>
<script src="./js/search.js" defer></script>
<script src="./js/search_index.js" defer></script>
<script src="./js/searcher.js" defer></script>
<script src="./js/darkfish.js" defer></script>

<link href="./css/fonts.css" rel="stylesheet">
<link href="./css/rdoc.css" rel="stylesheet">




<body id="top" role="document" class="class">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="./index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="./table_of_contents.html#pages">Pages</a>
    <a href="./table_of_contents.html#classes">Classes</a>
    <a href="./table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="class-metadata">
    
    <div id="parent-class-section" class="nav-section">
  <h3>Parent</h3>

  
  <p class="link">Object
  
</div>

    
    
    <!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    
    <li ><a href="#method-c-new">::new</a>
    
    <li ><a href="#method-i-execute">#execute</a>
    
    <li ><a href="#method-i-execute_files">#execute_files</a>
    
    <li ><a href="#method-i-get_action">#get_action</a>
    
    <li ><a href="#method-i-get_params">#get_params</a>
    
    <li ><a href="#method-i-get_test_stats">#get_test_stats</a>
    
    <li ><a href="#method-i-parse_command">#parse_command</a>
    
    <li ><a href="#method-i-run_script">#run_script</a>
    
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="class-Runner">
  <h1 id="class-Runner" class="class">
    class Runner
  </h1>

  <section class="description">
    
  </section>

  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    

    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Class Methods</h3>
       </header>

    
      <div id="method-c-new" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">new</span><span
            class="method-args">(driver, args, time, files, results_dir, stats_dir, login, session, config)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="new-source">
            <pre><span class="ruby-comment"># File lib/runner.rb, line 21</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">initialize</span>(<span class="ruby-identifier">driver</span>, <span class="ruby-identifier">args</span>, <span class="ruby-identifier">time</span>, <span class="ruby-identifier">files</span>, <span class="ruby-identifier">results_dir</span>, <span class="ruby-identifier">stats_dir</span>, <span class="ruby-identifier">login</span>, <span class="ruby-identifier">session</span>, <span class="ruby-identifier">config</span>)
  <span class="ruby-ivar">@driver</span> = <span class="ruby-identifier">driver</span>
  <span class="ruby-ivar">@args</span> = <span class="ruby-identifier">args</span>
  <span class="ruby-ivar">@time</span> = <span class="ruby-identifier">time</span>
  <span class="ruby-ivar">@files</span> = <span class="ruby-identifier">files</span>
  <span class="ruby-ivar">@results_dir</span> = <span class="ruby-identifier">results_dir</span>
  <span class="ruby-ivar">@stats_dir</span> = <span class="ruby-identifier">stats_dir</span>
  <span class="ruby-ivar">@login</span> = <span class="ruby-identifier">login</span>
  <span class="ruby-ivar">@session</span> = <span class="ruby-identifier">session</span>
  <span class="ruby-ivar">@config</span> = <span class="ruby-identifier">config</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Instance Methods</h3>
       </header>

    
      <div id="method-i-execute" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">execute</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Main method that triggers the framework to run every script specified by the user. Once the runner completes its functions, it will also terminate the WebDriver. If the user requested for stats from the</p>
          
          

          
          <div class="method-source-code" id="execute-source">
            <pre><span class="ruby-comment"># File lib/runner.rb, line 36</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">execute</span>
  <span class="ruby-identifier">execute_files</span>
  <span class="ruby-identifier">$session</span>.<span class="ruby-identifier">terminate</span>
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@stats_dir</span> <span class="ruby-operator">!=</span> <span class="ruby-string">&quot;no_stats&quot;</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@stats_dir</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;current&quot;</span>
      <span class="ruby-ivar">@stats_dir</span> = <span class="ruby-identifier">$results</span>.<span class="ruby-identifier">get_current_results_dir</span>
      <span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;stats = #{@stats_dir}&quot;</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">get_test_stats</span>(<span class="ruby-ivar">@stats_dir</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-execute_files" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">execute_files</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Execute test script file(s) in the files array. A new results file with the same name is created (with a timestamp at the end).</p>
          
          

          
          <div class="method-source-code" id="execute_files-source">
            <pre><span class="ruby-comment"># File lib/runner.rb, line 50</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">execute_files</span>
  <span class="ruby-ivar">@files</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">filename</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">filename</span>)
      <span class="ruby-identifier">$results</span> = <span class="ruby-constant">Results</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@driver</span>, <span class="ruby-ivar">@results_dir</span>, <span class="ruby-identifier">filename</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-string">&#39;/&#39;</span>, <span class="ruby-string">&#39;.&#39;</span>) <span class="ruby-operator">+</span> <span class="ruby-string">&quot;_&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-ivar">@time</span>.<span class="ruby-identifier">strftime</span>(<span class="ruby-string">&#39;%Y-%m-%d_%H.%M.%S&#39;</span>) <span class="ruby-operator">+</span> <span class="ruby-string">&quot;.txt&quot;</span>)
      <span class="ruby-identifier">$results</span>.<span class="ruby-identifier">log</span>(<span class="ruby-identifier">filename</span>)
      <span class="ruby-identifier">run_script</span>(<span class="ruby-identifier">filename</span>)
      <span class="ruby-identifier">$results</span>.<span class="ruby-identifier">end_test</span>
    <span class="ruby-keyword">end</span>
  }
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-get_action" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">get_action</span><span
            class="method-args">(line)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns the action that is specified in each line of the script.</p>
          
          

          
          <div class="method-source-code" id="get_action-source">
            <pre><span class="ruby-comment"># File lib/runner.rb, line 85</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">get_action</span>(<span class="ruby-identifier">line</span>)
  <span class="ruby-identifier">line</span>.<span class="ruby-identifier">split</span>.<span class="ruby-identifier">first</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-get_params" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">get_params</span><span
            class="method-args">(line)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns the parameter that comes after each action line in the script.</p>
          
          

          
          <div class="method-source-code" id="get_params-source">
            <pre><span class="ruby-comment"># File lib/runner.rb, line 90</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">get_params</span>(<span class="ruby-identifier">line</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">line</span>.<span class="ruby-identifier">include?</span> <span class="ruby-string">&#39;&quot;&#39;</span>
    <span class="ruby-comment"># Some kinda regex magic is happening here - courtesy: Mark Newbery</span>
    <span class="ruby-identifier">str</span> = <span class="ruby-identifier">line</span>.<span class="ruby-identifier">split</span>(<span class="ruby-regexp">/&quot;([^\\&quot;]+(?:\\.[^\\&quot;]*)*)&quot;|([^\s&quot;]+)/</span>)
    <span class="ruby-identifier">str</span> <span class="ruby-operator">-=</span> [<span class="ruby-string">&#39; &#39;</span>]
    <span class="ruby-identifier">str</span>.<span class="ruby-identifier">shift</span>(<span class="ruby-value">1</span>)
    <span class="ruby-identifier">str</span>.<span class="ruby-identifier">shift</span>(<span class="ruby-value">1</span>)
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">str</span> = <span class="ruby-identifier">line</span>.<span class="ruby-identifier">split</span>(<span class="ruby-regexp">/\s/</span>)[<span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">-1</span>]
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">str</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-get_test_stats" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">get_test_stats</span><span
            class="method-args">(stats_dir)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Generate stats from the <a href="Results.html"><code>Results</code></a> file that is created by the framework.</p>
          
          

          
          <div class="method-source-code" id="get_test_stats-source">
            <pre><span class="ruby-comment"># File lib/runner.rb, line 104</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">get_test_stats</span>(<span class="ruby-identifier">stats_dir</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">stats_dir</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;current&quot;</span>
    <span class="ruby-comment"># TODO: change current directory to new directory that is created during the session.</span>
    <span class="ruby-identifier">stats</span> = <span class="ruby-constant">Stats</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@results_dir</span>).<span class="ruby-identifier">get_failure_rate</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">stats</span> = <span class="ruby-constant">Stats</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">stats_dir</span>).<span class="ruby-identifier">get_failure_rate</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-parse_command" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">parse_command</span><span
            class="method-args">(action, params)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Creates a <a href="Command.html"><code>Command</code></a> object and execute the command based on the actions and parameters. @param [String] action - the action specified in the script @param [String] params - parameters that follows each action in the script</p>
          
          

          
          <div class="method-source-code" id="parse_command-source">
            <pre><span class="ruby-comment"># File lib/runner.rb, line 78</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">parse_command</span>(<span class="ruby-identifier">action</span>, <span class="ruby-identifier">params</span>)
  <span class="ruby-identifier">command</span> = <span class="ruby-constant">Command</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@driver</span>, <span class="ruby-ivar">@results_dir</span>, <span class="ruby-identifier">action</span>, <span class="ruby-identifier">params</span>)
  <span class="ruby-identifier">command</span>.<span class="ruby-identifier">execute</span>
  <span class="ruby-identifier">$session</span>.<span class="ruby-identifier">action_count</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-run_script" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">run_script</span><span
            class="method-args">(filename)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Reads each line in the test script and parse the command along with the parameters. @param [String] filename</p>
          
          

          
          <div class="method-source-code" id="run_script-source">
            <pre><span class="ruby-comment"># File lib/runner.rb, line 63</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">run_script</span>(<span class="ruby-identifier">filename</span>)
  <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">filename</span>, <span class="ruby-string">&#39;r&#39;</span>).<span class="ruby-identifier">each_line</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">line</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">line</span>.<span class="ruby-identifier">chomp!</span>
    <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">line</span>.<span class="ruby-identifier">empty?</span>
      <span class="ruby-ivar">@session</span> = <span class="ruby-constant">Session</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@driver</span>)
      <span class="ruby-identifier">action</span> = <span class="ruby-identifier">get_action</span>(<span class="ruby-identifier">line</span>)
      <span class="ruby-identifier">params</span> = <span class="ruby-identifier">get_params</span>(<span class="ruby-identifier">line</span>)
      <span class="ruby-identifier">parse_command</span>(<span class="ruby-identifier">action</span>, <span class="ruby-identifier">params</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
  </section>

</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="https://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="https://ruby.github.io/rdoc/">RDoc</a> 6.2.0.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

